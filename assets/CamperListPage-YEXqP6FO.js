import{r as u,j as e,s as x,b as q,i as F,B as j,V as C,P as l,e as S,f,t as P,u as V,L,k as N}from"./index-DWKHADjy.js";import{k as A,v as M,l as $,m as O,c as D,s as b,j as H,i as Z,S as K,h as U,n as Y,d as G,e as J,E as Q}from"./error-C-2m5-x3.js";var T;function y(){return y=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)({}).hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},y.apply(null,arguments)}const X=t=>u.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:32,height:32},t),T||(T=u.createElement("path",{fill:"#515151",d:"m18.221 7.206 9.585 9.585a2.265 2.265 0 0 1 0 3.195l-.8.801a2.266 2.266 0 0 1-3.194 0l-7.315-7.315-7.315 7.315a2.266 2.266 0 0 1-3.194 0l-.8-.801a2.265 2.265 0 0 1 0-3.195l9.587-9.585a2.24 2.24 0 0 1 1.723-.647 2.25 2.25 0 0 1 1.723.647"}))),z=({label:t,icon:n,value:s})=>e.jsxs("div",{className:x.container,children:[e.jsx("input",{className:x.hidden,type:"radio",id:t,name:"form",value:s}),e.jsxs("label",{htmlFor:t,className:x.label,children:[n,t]})]}),ee=({name:t,label:n,icon:s,iconSize:a=32,checked:o,onChange:i})=>e.jsxs("div",{className:x.checkboxContainer,children:[e.jsx("input",{type:"checkbox",id:t,name:t,className:x.hidden,checked:o,onChange:i}),e.jsxs("label",{htmlFor:t,className:x.label,children:[e.jsx("span",{className:x.icon,style:{width:a,height:a},children:q.cloneElement(s,{width:a,height:a})}),n]})]}),te=(t,n)=>t.filter(s=>{if(n.location&&!s.location.toLowerCase().includes(n.location.toLowerCase())||n.form&&s.form!==n.form)return!1;if(n.details){for(const a of n.details)if(!s[a])return!1}return!0}),se=t=>{const{location:n,AC:s,automatic:a,kitchen:o,TV:i,bathroom:r,form:c}=t,p={transmission:a?a.checked:!1,AC:s?s.checked:!1,kitchen:o?o.checked:!1,TV:i?i.checked:!1,bathroom:r?r.checked:!1},h={};n&&n.value&&(h.location=n.value),c&&c.value&&(h.form=c.value);const _=Object.keys(p).filter(v=>p[v]);return _.length>0&&(h.details=_),h},ne="_inputForm_u8wv3_1",ae="_inputContainer_u8wv3_9",ie="_label_u8wv3_17",re="_inputBar_u8wv3_22",oe="_cityInput_u8wv3_39",le="_locationIcon_u8wv3_50",ce="_filterSection_u8wv3_58",de="_filterTitle_u8wv3_64",ue="_checkBoxContainer_u8wv3_69",me="_btnsWrapper_u8wv3_74",pe="_h3Filter_u8wv3_82",d={inputForm:ne,inputContainer:ae,label:ie,inputBar:re,cityInput:oe,locationIcon:le,filterSection:ce,filterTitle:de,checkBoxContainer:ue,btnsWrapper:me,h3Filter:pe},he=({cards:t,setFilteredCards:n})=>{const{resetPage:s}=u.useContext(F),a=i=>{i.preventDefault();const r=se(i.target);let c=te(t,r);s(),n(c);const p=c.length;p>0?C.success(`${p} match${p>1?"es":""} found for your selection`):C.error("No matches for your selection"),o(i.target)},o=i=>{i.reset()};return e.jsx("div",{className:d.inputForm,children:e.jsxs("form",{onSubmit:a,children:[e.jsxs("div",{className:d.inputContainer,children:[e.jsx("label",{className:d.label,htmlFor:"location",children:"Location"}),e.jsxs("div",{className:d.inputBar,children:[e.jsx(A,{className:d.locationIcon}),e.jsx("input",{className:d.cityInput,type:"text",id:"location",autoComplete:"off",placeholder:"City"})]})]}),e.jsxs("div",{className:d.filterSection,children:[e.jsx("div",{className:d.filterTitle,children:e.jsx("p",{children:"Filters"})}),e.jsxs("div",{className:d.checkBoxContainer,children:[e.jsx("h3",{className:d.h3Filter,children:"Vehicle equipment"}),e.jsx("div",{className:d.btnsWrapper,children:M.map(({name:i,label:r,icon:c})=>e.jsx(ee,{name:i,label:r,icon:c},r))}),e.jsx("h3",{className:d.h3Filter,children:"Vehicle Type"}),e.jsx("div",{className:d.btnsWrapper,children:$.map(({value:i,label:r,icon:c})=>e.jsx(z,{value:i,label:r,icon:c},r))})]})]}),e.jsx(j,{type:"submit",text:"Search"})]})})},B=({detail:t})=>{const[n,s]=Array.isArray(t)?t:["",""],a=O.find(({name:i})=>i===n);if(!a||s===!1)return null;const o=D(s);return e.jsxs("li",{className:b.cardBadge,children:[e.jsx("span",{className:b.icon,children:a.icon}),e.jsx("span",{className:b.value,children:o||a.label})]})};B.propTypes={detail:l.array.isRequired};const xe=({item:t})=>{const n=S(),a=f(H).includes(t.id),o=i=>{i.stopPropagation(),n(P(t.id)),a?C.error("Camper removed from favorites!",{duration:700}):C.success("Camper added to favorites!",{duration:900})};return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26",stroke:a?"#E44848":"black",fill:a?"#E44848":"none",strokeWidth:"1.5",onClick:o,style:{cursor:"pointer",width:"26px",height:"24px"},children:e.jsx("path",{d:"M12 9.854L10.659 7.1705C10.326 6.506 9.7485 5.5505 8.931 4.778C8.127 4.0175 7.164 3.5 6 3.5C3.486 3.5 1.5 5.489 1.5 7.88C1.5 9.6965 2.331 10.979 4.302 12.935C4.8075 13.436 5.3835 13.9775 6.021 14.5745C7.683 16.1345 9.75 18.0755 12 20.6705C14.25 18.0755 16.317 16.1345 17.979 14.5745C18.6165 13.9775 19.194 13.4345 19.698 12.935C21.669 10.979 22.5 9.6965 22.5 7.88C22.5 5.489 20.514 3.5 18 3.5C16.8345 3.5 15.873 4.0175 15.069 4.778C14.2515 5.5505 13.674 6.506 13.341 7.1705L12 9.854ZM12.588 22.292C12.5158 22.3776 12.4257 22.4463 12.3242 22.4935C12.2226 22.5407 12.112 22.5651 12 22.5651C11.888 22.5651 11.7774 22.5407 11.6758 22.4935C11.5743 22.4463 11.4842 22.3776 11.412 22.292C9.0105 19.439 6.837 17.399 5.0475 15.7205C1.95 12.812 0 10.9835 0 7.88C0 4.6325 2.685 2 6 2C8.4 2 10.0785 3.575 11.106 5.012C11.496 5.5595 11.793 6.086 12 6.5C12.2597 5.982 12.5586 5.48456 12.894 5.012C13.9215 3.5735 15.6 2 18 2C21.315 2 24 4.6325 24 7.88C24 10.9835 22.05 12.812 18.9525 15.7205C17.163 17.4005 14.9895 19.442 12.588 22.292Z"})})},ge="_catalogContainer_10lrs_1",_e="_itemWrapper_10lrs_12",fe="_itemContent_10lrs_22",Ce="_img_10lrs_43",je="_titleWrapper_10lrs_52",ve="_itemTitle_10lrs_59",be="_itemTitleRight_10lrs_69",we="_itemsSubtitle_10lrs_83",ye="_itemSubtitle_10lrs_89",Ne="_badgeList_10lrs_99",Te="_notFound_10lrs_106",m={catalogContainer:ge,itemWrapper:_e,itemContent:fe,img:Ce,titleWrapper:je,itemTitle:ve,itemTitleRight:be,itemsSubtitle:we,itemSubtitle:ye,badgeList:Ne,notFound:Te},E=({item:t})=>{var a,o,i;const n=V(),s=r=>{n(`/catalog/${r}`)};return e.jsxs("section",{className:m.itemWrapper,children:[e.jsx("div",{className:m.img,children:e.jsx("img",{src:((o=(a=t.gallery)==null?void 0:a[0])==null?void 0:o.thumb)||"",alt:t.name||"Camper"})}),e.jsxs("div",{className:m.itemContent,children:[e.jsxs("div",{className:m.titleWrapper,children:[e.jsxs("div",{className:m.itemTitle,children:[e.jsx("h2",{children:t.name}),e.jsxs("div",{className:m.itemTitleRight,children:[Z(t.price),e.jsx(xe,{item:t})]})]}),e.jsxs("div",{className:m.itemsSubtitle,children:[e.jsxs("div",{className:m.itemSubtitle,children:[e.jsx(K,{}),e.jsxs("span",{children:[t.rating," (",((i=t.reviews)==null?void 0:i.length)||0," Reviews)"]})]}),e.jsx(U,{location:t.location})]})]}),e.jsx("p",{children:t.description}),e.jsx("ul",{className:m.badgeList,children:Object.entries(t).map(([r,c])=>e.jsx(B,{detail:[r,c]},r))}),e.jsx(j,{text:"Show more",onClick:()=>s(t.id)})]})]},t.id)};E.propTypes={item:l.shape({id:l.string.isRequired,name:l.string.isRequired,price:l.number.isRequired,rating:l.number,reviews:l.arrayOf(l.object),location:l.string,description:l.string,gallery:l.arrayOf(l.shape({thumb:l.string}))}).isRequired};const ke="_scrollToTop_u3x3f_1",Fe="_buttonScroll_u3x3f_8",k={scrollToTop:ke,buttonScroll:Fe},Se=u.createContext({currentPage:1,increasePage:()=>{},resetPage:()=>{}}),Le=()=>{const[t,n]=u.useState(!1),{isModalShown:s}=u.useContext(Se),a=()=>{n(window.scrollY>300)},o=()=>{window.scrollTo({top:0,behavior:"smooth"})};return u.useEffect(()=>(window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a)}),[]),e.jsx("div",{className:k.scrollToTop,children:t&&!s&&e.jsx("button",{onClick:o,className:k.buttonScroll,children:e.jsx(X,{})})})},R=({data:t=[],listRef:n})=>e.jsxs("ul",{className:m.catalogContainer,ref:n,children:[t.length>0?t.map(s=>e.jsx(E,{item:s},s.id)):e.jsx("div",{className:m.notFound,children:"Please review your query and try again!"}),e.jsx(Le,{})]});R.propTypes={data:l.array.isRequired,listRef:l.object};const Be=t=>{setTimeout(()=>{t.current&&window.scrollBy({behavior:"smooth",top:window.innerHeight-t.current.getBoundingClientRect().top})},0)},Ee=(t,n)=>{const s=t*4;return{cards:[...n].splice(0,s),isBtnVisible:n.length>s}},Re="/assets/Emptic-Dwptf_Bn.jpg",We="_section_k9qxu_1",Ie="_title_k9qxu_10",qe="_noItemsText_k9qxu_16",Pe="_imageContainer_k9qxu_21",Ve="_message_k9qxu_37",g={section:We,title:Ie,noItemsText:qe,imageContainer:Pe,message:Ve},Ae=({resetFilters:t})=>{const[n,s]=u.useState(!1),a=()=>{s(!0),t(),setTimeout(()=>s(!1),250)};return e.jsx("div",{className:g.section,children:n?e.jsx(L,{}):e.jsxs(e.Fragment,{children:[e.jsx("img",{className:g.imageContainer,src:Re,alt:"Empty"}),e.jsxs("div",{className:g.noItemsText,children:[e.jsx("h2",{className:g.title,children:"Hard choice?"}),e.jsx("p",{className:g.message,children:"Keep selecting ðŸ’• to review your favorite campervans later on"})]}),e.jsx(j,{text:"Back to selection",onClick:a,style:{padding:"16px 4px"}})]})})},Me="_pageContainer_a373l_1",$e="_contentWrapper_a373l_8",Oe="_loadMore_a373l_13",w={pageContainer:Me,contentWrapper:$e,loadMore:Oe},Ze=({filterCondition:t})=>{const n=S(),{campers:s}=f(Y),a=f(G),o=f(J),[i,r]=u.useState([]),{currentPage:c,increasePage:p}=u.useContext(F),h=u.useRef();u.useEffect(()=>{s.length===0&&!a&&n(N())},[n,s,a]),u.useEffect(()=>{Array.isArray(s)&&r(s.filter(t))},[s,t]);const _=()=>{r(s),s.length===0&&n(N())},{cards:v,isBtnVisible:W}=Ee(c,i),I=()=>{p(),Be(h)};return o?e.jsx(Q,{error:o}):a?e.jsx(L,{isLoading:!0}):e.jsxs("div",{className:w.pageContainer,children:[e.jsxs("div",{className:w.contentWrapper,children:[e.jsx(he,{cards:i,setFilteredCards:r}),i.length>0?e.jsx(R,{data:v,listRef:h}):e.jsx(Ae,{resetFilters:_})]}),W&&e.jsx(j,{className:w.loadMore,text:"Load more",onClick:I})]})};export{Ze as C};
