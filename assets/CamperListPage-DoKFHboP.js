import{r as m,j as e,s as p,b as W,i as T,B as C,V as f,P as l,e as k,f as F,t as I,u as S,L as q,k as P}from"./index-C3ptrJ9l.js";import{k as V,v as A,l as M,m as $,c as O,s as v,j as D,i as H,S as Z,h as K,E as U}from"./error-B_oIGmhW.js";var y;function w(){return w=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)({}).hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},w.apply(null,arguments)}const Y=t=>m.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:32,height:32},t),y||(y=m.createElement("path",{fill:"#515151",d:"m18.221 7.206 9.585 9.585a2.265 2.265 0 0 1 0 3.195l-.8.801a2.266 2.266 0 0 1-3.194 0l-7.315-7.315-7.315 7.315a2.266 2.266 0 0 1-3.194 0l-.8-.801a2.265 2.265 0 0 1 0-3.195l9.587-9.585a2.24 2.24 0 0 1 1.723-.647 2.25 2.25 0 0 1 1.723.647"}))),G=({label:t,icon:s,value:n})=>e.jsxs("div",{className:p.container,children:[e.jsx("input",{className:p.hidden,type:"radio",id:t,name:"form",value:n}),e.jsxs("label",{htmlFor:t,className:p.label,children:[s,t]})]}),J=({name:t,label:s,icon:n,iconSize:a=32,checked:r,onChange:i})=>e.jsxs("div",{className:p.checkboxContainer,children:[e.jsx("input",{type:"checkbox",id:t,name:t,className:p.hidden,checked:r,onChange:i}),e.jsxs("label",{htmlFor:t,className:p.label,children:[e.jsx("span",{className:p.icon,style:{width:a,height:a},children:W.cloneElement(n,{width:a,height:a})}),s]})]}),Q=(t,s)=>t.filter(n=>{if(s.location&&!n.location.toLowerCase().includes(s.location.toLowerCase())||s.form&&n.form!==s.form)return!1;if(s.details){for(const a of s.details)if(!n[a])return!1}return!0}),X=t=>{const{location:s,AC:n,automatic:a,kitchen:r,TV:i,bathroom:o,form:c}=t,h={transmission:a?a.checked:!1,AC:n?n.checked:!1,kitchen:r?r.checked:!1,TV:i?i.checked:!1,bathroom:o?o.checked:!1},x={};s&&s.value&&(x.location=s.value),c&&c.value&&(x.form=c.value);const _=Object.keys(h).filter(j=>h[j]);return _.length>0&&(x.details=_),x},z="_inputForm_1w2uh_1",ee="_inputContainer_1w2uh_9",te="_label_1w2uh_17",se="_inputBar_1w2uh_22",ne="_cityInput_1w2uh_34",ae="_locationIcon_1w2uh_45",ie="_filterSection_1w2uh_53",re="_filterTitle_1w2uh_59",oe="_checkBoxContainer_1w2uh_64",le="_btnsWrapper_1w2uh_69",ce="_h3Filter_1w2uh_77",d={inputForm:z,inputContainer:ee,label:te,inputBar:se,cityInput:ne,locationIcon:ae,filterSection:ie,filterTitle:re,checkBoxContainer:oe,btnsWrapper:le,h3Filter:ce},de=({cards:t,setFilteredCards:s})=>{const{resetPage:n}=m.useContext(T),a=i=>{i.preventDefault();const o=X(i.target);let c=Q(t,o);n(),s(c);const h=c.length;h>0?f.success(`${h} match${h>1?"es":""} found for your selection`):f.error("No matches for your selection"),r(i.target)},r=i=>{i.reset()};return e.jsx("div",{className:d.inputForm,children:e.jsxs("form",{onSubmit:a,children:[e.jsxs("div",{className:d.inputContainer,children:[e.jsx("label",{className:d.label,htmlFor:"location",children:"Location"}),e.jsxs("div",{className:d.inputBar,children:[e.jsx(V,{className:d.locationIcon}),e.jsx("input",{className:d.cityInput,type:"text",id:"location",autoComplete:"off",placeholder:"City"})]})]}),e.jsxs("div",{className:d.filterSection,children:[e.jsx("div",{className:d.filterTitle,children:e.jsx("p",{children:"Filters"})}),e.jsxs("div",{className:d.checkBoxContainer,children:[e.jsx("h3",{className:d.h3Filter,children:"Vehicle equipment"}),e.jsx("div",{className:d.btnsWrapper,children:A.map(({name:i,label:o,icon:c})=>e.jsx(J,{name:i,label:o,icon:c},o))}),e.jsx("h3",{className:d.h3Filter,children:"Vehicle Type"}),e.jsx("div",{className:d.btnsWrapper,children:M.map(({value:i,label:o,icon:c})=>e.jsx(G,{value:i,label:o,icon:c},o))})]})]}),e.jsx(C,{type:"submit",text:"Search"})]})})},B=({detail:t})=>{const[s,n]=Array.isArray(t)?t:["",""],a=$.find(({name:i})=>i===s);if(!a||n===!1)return null;const r=O(n);return e.jsxs("li",{className:v.cardBadge,children:[e.jsx("span",{className:v.icon,children:a.icon}),e.jsx("span",{className:v.value,children:r||a.label})]})};B.propTypes={detail:l.array.isRequired};const me=({item:t})=>{const s=k(),a=F(D).includes(t.id),r=i=>{i.stopPropagation(),s(I(t.id)),a?f.error("Camper removed from favorites!",{duration:700}):f.success("Camper added to favorites!",{duration:900})};return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26",stroke:a?"#E44848":"black",fill:a?"#E44848":"none",strokeWidth:"1.5",onClick:r,style:{cursor:"pointer",width:"26px",height:"24px"},children:e.jsx("path",{d:"M12 9.854L10.659 7.1705C10.326 6.506 9.7485 5.5505 8.931 4.778C8.127 4.0175 7.164 3.5 6 3.5C3.486 3.5 1.5 5.489 1.5 7.88C1.5 9.6965 2.331 10.979 4.302 12.935C4.8075 13.436 5.3835 13.9775 6.021 14.5745C7.683 16.1345 9.75 18.0755 12 20.6705C14.25 18.0755 16.317 16.1345 17.979 14.5745C18.6165 13.9775 19.194 13.4345 19.698 12.935C21.669 10.979 22.5 9.6965 22.5 7.88C22.5 5.489 20.514 3.5 18 3.5C16.8345 3.5 15.873 4.0175 15.069 4.778C14.2515 5.5505 13.674 6.506 13.341 7.1705L12 9.854ZM12.588 22.292C12.5158 22.3776 12.4257 22.4463 12.3242 22.4935C12.2226 22.5407 12.112 22.5651 12 22.5651C11.888 22.5651 11.7774 22.5407 11.6758 22.4935C11.5743 22.4463 11.4842 22.3776 11.412 22.292C9.0105 19.439 6.837 17.399 5.0475 15.7205C1.95 12.812 0 10.9835 0 7.88C0 4.6325 2.685 2 6 2C8.4 2 10.0785 3.575 11.106 5.012C11.496 5.5595 11.793 6.086 12 6.5C12.2597 5.982 12.5586 5.48456 12.894 5.012C13.9215 3.5735 15.6 2 18 2C21.315 2 24 4.6325 24 7.88C24 10.9835 22.05 12.812 18.9525 15.7205C17.163 17.4005 14.9895 19.442 12.588 22.292Z"})})},ue="_catalogContainer_10lrs_1",he="_itemWrapper_10lrs_12",pe="_itemContent_10lrs_22",xe="_img_10lrs_43",ge="_titleWrapper_10lrs_52",_e="_itemTitle_10lrs_59",fe="_itemTitleRight_10lrs_69",Ce="_itemsSubtitle_10lrs_83",je="_itemSubtitle_10lrs_89",ve="_badgeList_10lrs_99",be="_notFound_10lrs_106",u={catalogContainer:ue,itemWrapper:he,itemContent:pe,img:xe,titleWrapper:ge,itemTitle:_e,itemTitleRight:fe,itemsSubtitle:Ce,itemSubtitle:je,badgeList:ve,notFound:be},L=({item:t})=>{var a,r,i;const s=S(),n=o=>{s(`/details/${o}`)};return e.jsxs("section",{className:u.itemWrapper,children:[e.jsx("div",{className:u.img,children:e.jsx("img",{src:((r=(a=t.gallery)==null?void 0:a[0])==null?void 0:r.thumb)||"",alt:t.name||"Camper"})}),e.jsxs("div",{className:u.itemContent,children:[e.jsxs("div",{className:u.titleWrapper,children:[e.jsxs("div",{className:u.itemTitle,children:[e.jsx("h2",{children:t.name}),e.jsxs("div",{className:u.itemTitleRight,children:[H(t.price),e.jsx(me,{item:t})]})]}),e.jsxs("div",{className:u.itemsSubtitle,children:[e.jsxs("div",{className:u.itemSubtitle,children:[e.jsx(Z,{}),e.jsxs("span",{children:[t.rating," (",((i=t.reviews)==null?void 0:i.length)||0," Reviews)"]})]}),e.jsx(K,{location:t.location})]})]}),e.jsx("p",{children:t.description}),e.jsx("ul",{className:u.badgeList,children:Object.entries(t).map(([o,c])=>e.jsx(B,{detail:[o,c]},o))}),e.jsx(C,{text:"Show more",onClick:()=>n(t.id)})]})]},t.id)};L.propTypes={item:l.shape({id:l.string.isRequired,name:l.string.isRequired,price:l.number.isRequired,rating:l.number,reviews:l.arrayOf(l.object),location:l.string,description:l.string,gallery:l.arrayOf(l.shape({thumb:l.string}))}).isRequired};const we="_scrollToTop_u3x3f_1",ye="_buttonScroll_u3x3f_8",N={scrollToTop:we,buttonScroll:ye},Ne=m.createContext({currentPage:1,increasePage:()=>{},resetPage:()=>{}}),Te=()=>{const[t,s]=m.useState(!1),{isModalShown:n}=m.useContext(Ne),a=()=>{s(window.scrollY>300)},r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return m.useEffect(()=>(window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a)}),[]),e.jsx("div",{className:N.scrollToTop,children:t&&!n&&e.jsx("button",{onClick:r,className:N.buttonScroll,children:e.jsx(Y,{})})})},E=({data:t=[],listRef:s})=>e.jsxs("ul",{className:u.catalogContainer,ref:s,children:[t.length>0?t.map(n=>e.jsx(L,{item:n},n.id)):e.jsx("div",{className:u.notFound,children:"Please review your query and try again!"}),e.jsx(Te,{})]});E.propTypes={data:l.array.isRequired,listRef:l.object};const ke=t=>{setTimeout(()=>{t.current&&window.scrollBy({behavior:"smooth",top:window.innerHeight-t.current.getBoundingClientRect().top})},0)},Fe=(t,s)=>{const n=t*4;return{cards:[...s].splice(0,n),isBtnVisible:s.length>n}},Se="/assets/Emptic-Dwptf_Bn.jpg",Be="_section_k9qxu_1",Le="_title_k9qxu_10",Ee="_noItemsText_k9qxu_16",Re="_imageContainer_k9qxu_21",We="_message_k9qxu_37",g={section:Be,title:Le,noItemsText:Ee,imageContainer:Re,message:We},Ie=()=>{const t=S(),[s,n]=m.useState(!1),a=()=>{n(!0),setTimeout(()=>{t("/catalog")},250)};return e.jsx("div",{className:g.section,children:s?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[e.jsx("img",{className:g.imageContainer,src:Se,alt:"Emptic"}),e.jsxs("div",{className:g.noItemsText,children:[e.jsx("h2",{className:g.title,children:"Hard choice?"}),e.jsx("p",{className:g.message,children:"Keep clicking the hearts to review your favorite campervans later on"})]}),e.jsx(C,{text:"Back to catalog",onClick:a,style:{padding:"16px 4px"}})]})})},qe="_pageContainer_a373l_1",Pe="_contentWrapper_a373l_8",Ve="_loadMore_a373l_13",b={pageContainer:qe,contentWrapper:Pe,loadMore:Ve},$e=({filterCondition:t})=>{const s=k(),{campers:n,error:a}=F(R=>R.data),[r,i]=m.useState([]),{currentPage:o,increasePage:c}=m.useContext(T),h=m.useRef();m.useEffect(()=>{n.length===0&&s(P())},[s,n]),m.useEffect(()=>{Array.isArray(n)&&i(n.filter(t))},[n,t]);const{cards:x,isBtnVisible:_}=Fe(o,r),j=()=>{c(),ke(h)};return a?e.jsx(U,{error:a}):e.jsxs("div",{className:b.pageContainer,children:[e.jsxs("div",{className:b.contentWrapper,children:[e.jsx(de,{cards:r,setFilteredCards:i}),r.length>0?e.jsx(E,{data:x,listRef:h}):e.jsx(Ie,{})]}),_&&e.jsx(C,{className:b.loadMore,text:"Load more",onClick:j})]})};export{$e as C};
