From e72f5a73d767a483571e7ec3bb7192649f47d3e3 Mon Sep 17 00:00:00 2001
From: DmytroZhuk <dm.zhuk@gmail.com>
Date: Sun, 27 Oct 2024 13:11:40 +0100
Subject: [PATCH] fixes

---
 .../components/CardContent/CardContent.jsx    | 19 ++++++++-----------
 src/common/components/UI/Loader/Loader.jsx    |  5 ++++-
 src/pages/CatalogPage/CatalogPage.jsx         |  5 +----
 src/store/dataSlice.js                        |  2 +-
 4 files changed, 14 insertions(+), 17 deletions(-)

diff --git a/src/common/components/CardContent/CardContent.jsx b/src/common/components/CardContent/CardContent.jsx
index b588500..b5a484e 100644
--- a/src/common/components/CardContent/CardContent.jsx
+++ b/src/common/components/CardContent/CardContent.jsx
@@ -27,15 +27,11 @@ const CardContent = ({ item }) => {
 
   return (
     <li key={item._id} className={styles.itemWrapper}>
-      <Modal ref={modalRef}>
-        <CardDetails
-          card={card}
-          isDescription={isDescription}
-          setIsDescription={setIsDescription}
-        />
-      </Modal>
+      {/* <Modal ref={modalRef}>
+              <CardDetails card={card} isDescription={isDescription} setIsDescription={setIsDescription} />
+          </Modal> */}
       <div className={styles.img}>
-        <img src={item.gallery[0]} alt="" />
+        <img src={item.gallery[0].thumb} alt="" />
       </div>
 
       <div className={styles.itemContent}>
@@ -60,9 +56,10 @@ const CardContent = ({ item }) => {
         </div>
         <p>{item.description}</p>
         <ul className={styles.detailList}>
-          {Object.entries(item.details).map((detail, index) => (
-            <CardBadge detail={detail} key={index} />
-          ))}
+          {item.details &&
+            Object.entries(item.details).map((detail, index) => (
+              <CardBadge detail={detail} key={index} />
+            ))}
         </ul>
         <Button text="Show more" onClick={() => handleShowMore(item)} />
       </div>
diff --git a/src/common/components/UI/Loader/Loader.jsx b/src/common/components/UI/Loader/Loader.jsx
index d4c5a88..553f082 100644
--- a/src/common/components/UI/Loader/Loader.jsx
+++ b/src/common/components/UI/Loader/Loader.jsx
@@ -2,7 +2,10 @@ import React from 'react';
 import { Grid } from 'react-loader-spinner';
 import { LoaderContainer } from './index';
 
-const Loader = () => {
+const Loader = ({ isLoading = false }) => {
+  if (!isLoading) {
+    return null;
+  }
   return (
     <LoaderContainer>
       <Grid
diff --git a/src/pages/CatalogPage/CatalogPage.jsx b/src/pages/CatalogPage/CatalogPage.jsx
index a5211b4..dbe9cfa 100644
--- a/src/pages/CatalogPage/CatalogPage.jsx
+++ b/src/pages/CatalogPage/CatalogPage.jsx
@@ -37,10 +37,7 @@ const CatalogPage = () => {
       {!isLoading && !error && (
         <div className={styles.pageContainer}>
           <div className={styles.catalogWrapper}>
-            <CardFilter
-              campers={campers}
-              setFilteredCampers={setFilteredCampers}
-            />
+            <CardFilter cards={campers} setFilteredCards={setFilteredCampers} />
             <CardCatalog data={cards} listRef={listRef} />
           </div>
           {isVisible && (
diff --git a/src/store/dataSlice.js b/src/store/dataSlice.js
index 28428a3..4226c88 100644
--- a/src/store/dataSlice.js
+++ b/src/store/dataSlice.js
@@ -26,7 +26,7 @@ const dataSlice = createSlice({
   extraReducers: (builder) => {
     builder
       .addCase(fetchData.fulfilled, (state, action) => {
-        state.campers = action.payload;
+        state.campers = action.payload.items;
       })
       .addMatcher((action) => action.type.endsWith("/pending"), handlePending)
       .addMatcher((action) => action.type.endsWith("/rejected"), handleRejected)
-- 
2.32.1 (Apple Git-133)

